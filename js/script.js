var Main;new(Main=function(){function t(){this.head=document.querySelector("head"),this.social_txt=document.querySelector(".social_txt"),this.social=document.querySelector(".social"),this.social_btns={tweet:document.querySelector(".tweet"),facebook:document.querySelector(".facebook"),gplus:document.querySelector(".gplus"),link:document.querySelector(".link")},this.social_btn=document.querySelector(".social_btn"),this.exec()}return t.prototype.setSocial=function(){var t,e,i;return t=469711053215641,window.twttr=function(){var t,e,i;return t=document.getElementsByTagName("script")[0],document.getElementById("twitter-wjs")?void 0:(e=document.createElement("script"),e.id="twitter-wjs",e.src="https://platform.twitter.com/widgets.js",t.parentNode.insertBefore(e,t),null!=window.twttr?window.twttr:i={_e:[],ready:function(t){return i._e.push(t)}})}(),e=document.getElementsByTagName("script")[0],i=document.createElement("script"),i.id="facebook-jssdk",i.src="//connect.facebook.net/ja_JP/sdk.js#xfbml=1&"+("appId="+t+"&version=v2.0"),e.parentNode.insertBefore(i,e),this.social_btns.facebook.addEventListener("click",function(t){return function(e){return FB.ui({method:"share",href:t.url})}}(this)),this.social_btns.tweet.addEventListener("click",function(t){return function(e){var i,n,r,c,o,s,a,l,u,d;return null!=window.screenLeft?(i=window.screenLeft,n=window.screenTop):(i=window.screen.left,n=window.screen.top),null!=window.innerWidth?(u=window.innerWidth,l=window.innerHeight):null!=(null!=(d=document.documentElement)?d.clientWidth:void 0)?(u=document.documentElement.clientWidth,u=document.documentElement.clientHeight):(u=window.screen.width,u=window.screen.height),o=650,c=450,r=u/2-o/2+i,s=l/2-c/2+n,t.extract.length>80-t.title.length&&(t.extract=t.extract.slice(0,80-t.title.length)+"..."),a=t.title+" - "+t.extract,window.open("http://twitter.com/share?url="+t.url+"&text="+encodeURIComponent(a)+"&hashtags=知見山","twitter","width="+o+", height="+c+", top="+s+", left="+r)}}(this))},t.prototype.exec=function(){var t,e;return this.social_btn.addEventListener("click",function(t){return function(){return t.social.getAttribute("class").match("is_show")?t.social.classList.remove("is_show"):(t.social.classList.add("is_show"),t.social_txt.select())}}(this)),this.social_btns.link.addEventListener("click",function(t){return function(){return t.social_btns.link.getAttribute("class").match("is_active")?(t.social_btns.link.classList.remove("is_active"),t.social_txt.setAttribute("value",t.title+" - "+t.url)):(t.social_btns.link.classList.add("is_active"),t.social_txt.setAttribute("value",t.url)),t.social_txt.select()}}(this)),window.detail_callback=function(t){return function(e){var i;for(i in e.query.pages)return t.extract=e.query.pages[i].extract.replace(/[\n\r]/g,""),t.title=e.query.pages[i].title,void t.social_txt.setAttribute("value",t.title+" - "+t.url)}}(this),window.list_callback=function(t){return function(e){var i,n;return t.url="http://"+t.lang+".wikipedia.org/w/index.php?curid="+e.query.random[0].id,i=document.createElement("iframe"),i.setAttribute("src",t.url),document.body.appendChild(i),n=document.createElement("script"),n.setAttribute("src","https://"+t.lang+".wikipedia.org/w/api.php?format=json&action=query&"+("titles="+e.query.random[0].title+"&prop=extracts&redirects=1&")+"exchars=130&explaintext=1&callback=detail_callback"),t.head.appendChild(n),t.social_btn.style.display="block"}}(this),t=window.navigator.userLanguage||window.navigator.language||window.navigator.browserLanguage,this.lang=t.match("ja")?"ja":"en",e=document.createElement("script"),e.setAttribute("src","https://"+this.lang+".wikipedia.org/w/api.php?format=json&action=query&list=random&rnnamespace=0&rnlimit=1&callback=list_callback"),this.head.appendChild(e),this.setSocial(),console.log(window.parent.document.querySelector("title"))},t}());