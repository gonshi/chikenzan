var Main;new(Main=function(){function e(){this.head=document.querySelector("head"),this.social_btns={tweet:document.querySelector(".tweet"),facebook:document.querySelector(".facebook"),gplus:document.querySelector(".gplus"),link:document.querySelector(".link")},this.exec()}return e.prototype.setSocial=function(){var e,t,n,r,i;return e=469711053215641,window.twttr=function(){var e,t,n;return e=document.getElementsByTagName("script")[0],document.getElementById("twitter-wjs")?void 0:(t=document.createElement("script"),t.id="twitter-wjs",t.src="https://platform.twitter.com/widgets.js",e.parentNode.insertBefore(t,e),null!=window.twttr?window.twttr:n={_e:[],ready:function(e){return n._e.push(e)}})}(),r=document.createElement("script"),r.type="text/javascript",r.async=!0,r.src="https://apis.google.com/js/plusone.js",i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(r,i),t=document.getElementsByTagName("script")[0],n=document.createElement("script"),n.id="facebook-jssdk",n.src="//connect.facebook.net/ja_JP/sdk.js#xfbml=1&"+("appId="+e+"&version=v2.0"),t.parentNode.insertBefore(n,t),this.social_btns.facebook.addEventListener("click",function(e){return function(t){return FB.ui({method:"share",href:e.url})}}(this)),this.social_btns.tweet.addEventListener("click",function(e){return function(t){var n,r,i,c,o,a,s,d,l,u;return null!=window.screenLeft?(n=window.screenLeft,r=window.screenTop):(n=window.screen.left,r=window.screen.top),null!=window.innerWidth?(l=window.innerWidth,d=window.innerHeight):null!=(null!=(u=document.documentElement)?u.clientWidth:void 0)?(l=document.documentElement.clientWidth,l=document.documentElement.clientHeight):(l=window.screen.width,l=window.screen.height),o=650,c=450,i=l/2-o/2+n,a=d/2-c/2+r,e.extract.length>80-e.title.length&&(e.extract=e.extract.slice(0,80-e.title.length)+"..."),s=e.title+" - "+e.extract,window.open("http://twitter.com/share?url="+e.url+"&text="+encodeURIComponent(s)+"&hashtags=知見山","twitter","width="+o+", height="+c+", top="+a+", left="+i)}}(this))},e.prototype.exec=function(){var e;return window.detail_callback=function(e){return function(t){var n;for(n in t.query.pages)return e.extract=t.query.pages[n].extract.replace(/[\n\r]/g,""),void(e.title=t.query.pages[n].title)}}(this),window.list_callback=function(e){return function(t){var n,r;return e.url="http://ja.wikipedia.org/w/index.php?curid="+t.query.random[0].id,n=document.createElement("iframe"),n.setAttribute("src",e.url),document.body.appendChild(n),r=document.createElement("script"),r.setAttribute("src","https://ja.wikipedia.org/w/api.php?format=json&action=query&"+("titles="+t.query.random[0].title+"&prop=extracts&redirects=1&")+"exchars=130&explaintext=1&callback=detail_callback"),e.head.appendChild(r)}}(this),e=document.createElement("script"),e.setAttribute("src","https://ja.wikipedia.org/w/api.php?format=json&action=query&list=random&rnnamespace=0&rnlimit=1&callback=list_callback"),this.head.appendChild(e),this.setSocial()},e}());